<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LINO V3 - Testing Console</title>
    
    <!-- CARGAR SCRIPTS LINO V3 DESDE EL SERVIDOR -->
    <script src="http://127.0.0.1:8001/static/js/lino-theme.js"></script>
    <script src="http://127.0.0.1:8001/static/js/lino-animations.js"></script>
    <script src="http://127.0.0.1:8001/static/js/lino-tooltips.js"></script>
    <script src="http://127.0.0.1:8001/static/js/lino-css-optimizer.js"></script>
    
    <!-- CARGAR CSS LINO V3 -->
    <link rel="stylesheet" href="http://127.0.0.1:8001/static/css/lino-design-system-v3.css">
    <link rel="stylesheet" href="http://127.0.0.1:8001/static/css/lino-dark-mode.css">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8f9fa;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2d3748;
            border-bottom: 3px solid #6f7a37;
            padding-bottom: 10px;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: #f7fafc;
        }
        .test-button {
            background: #6f7a37;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px 10px 10px 0;
            font-weight: 600;
            transition: all 0.2s;
        }
        .test-button:hover {
            background: #5a6530;
            transform: translateY(-2px);
        }
        .test-button.secondary {
            background: #4a5568;
        }
        .test-button.danger {
            background: #e53e3e;
        }
        .output {
            background: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 400px;
            overflow-y: auto;
            margin: 20px 0;
            white-space: pre-wrap;
        }
        .demo-element {
            padding: 20px;
            margin: 10px 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .demo-element:hover {
            transform: scale(1.02);
        }
        .kpi-demo {
            display: flex;
            gap: 15px;
            margin: 20px 0;
        }
        .kpi-card {
            flex: 1;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            text-align: center;
            cursor: pointer;
        }
        .kpi-number {
            font-size: 24px;
            font-weight: bold;
            color: #6f7a37;
        }
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin: 5px 0;
        }
        .status.success { background: #c6f6d5; color: #22543d; }
        .status.warning { background: #fefcbf; color: #744210; }
        .status.error { background: #fed7d7; color: #742a2a; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ LINO Design System V3 - Testing Console</h1>
        <p>Console de pruebas para verificar todas las funcionalidades avanzadas implementadas.</p>
        
        <!-- Secci√≥n 1: Sistema de Temas -->
        <div class="test-section">
            <h2>üé® Sistema de Temas</h2>
            <p>Prueba el sistema de temas avanzado con detecci√≥n autom√°tica.</p>
            
            <button class="test-button" onclick="testThemeSystem()">
                Alternar Tema
            </button>
            <button class="test-button secondary" onclick="showThemeInfo()">
                Info del Tema
            </button>
            <button class="test-button secondary" onclick="resetTheme()">
                Reset Tema
            </button>
            
            <div class="demo-element" id="theme-demo">
                Elemento de demostraci√≥n - Cambia con el tema
            </div>
        </div>
        
        <!-- Secci√≥n 2: Tooltips -->
        <div class="test-section">
            <h2>üí¨ Sistema de Tooltips</h2>
            <p>Prueba los tooltips avanzados con posicionamiento inteligente.</p>
            
            <button class="test-button" 
                    data-tooltip="Este es un tooltip b√°sico"
                    data-tooltip-position="top">
                Tooltip Arriba
            </button>
            <button class="test-button secondary" 
                    data-tooltip="Tooltip con contenido m√°s largo para probar el wrapping autom√°tico"
                    data-tooltip-position="bottom"
                    data-tooltip-variant="success">
                Tooltip Abajo (Success)
            </button>
            <button class="test-button" 
                    data-tooltip="Tooltip de advertencia"
                    data-tooltip-position="left"
                    data-tooltip-variant="warning">
                Tooltip Izquierda (Warning)
            </button>
            <button class="test-button danger" 
                    data-tooltip="Tooltip de error cr√≠tico"
                    data-tooltip-position="right"
                    data-tooltip-variant="danger">
                Tooltip Derecha (Error)
            </button>
        </div>
        
        <!-- Secci√≥n 3: Animaciones -->
        <div class="test-section">
            <h2>üé¨ Sistema de Animaciones</h2>
            <p>Prueba las animaciones fluidas y micro-interacciones.</p>
            
            <button class="test-button" onclick="testAnimations()">
                Ejecutar Animaciones
            </button>
            <button class="test-button secondary" onclick="testCounterAnimation()">
                Contador Animado
            </button>
            <button class="test-button secondary" onclick="testProgressAnimation()">
                Barra de Progreso
            </button>
            
            <div class="kpi-demo">
                <div class="kpi-card" id="kpi-1" data-lino-animate="fadeInUp">
                    <div class="kpi-number" id="counter-1">0</div>
                    <div>Productos</div>
                </div>
                <div class="kpi-card" id="kpi-2" data-lino-animate="scaleIn">
                    <div class="kpi-number" id="counter-2">0</div>
                    <div>Ventas</div>
                </div>
                <div class="kpi-card" id="kpi-3" data-lino-animate="slideInRight">
                    <div class="kpi-number" id="counter-3">0</div>
                    <div>Stock</div>
                </div>
            </div>
            
            <div style="background: #e2e8f0; height: 20px; border-radius: 10px; overflow: hidden; margin: 20px 0;">
                <div id="progress-bar" style="width: 0%; height: 100%; background: #6f7a37; transition: width 0.3s;"></div>
            </div>
        </div>
        
        <!-- Secci√≥n 4: Optimizaci√≥n CSS -->
        <div class="test-section">
            <h2>‚ö° Optimizaci√≥n CSS</h2>
            <p>Analiza y optimiza el CSS del sistema en tiempo real.</p>
            
            <button class="test-button" onclick="runCSSAnalysis()">
                Analizar CSS
            </button>
            <button class="test-button secondary" onclick="optimizeCSS()">
                Optimizar CSS
            </button>
            <button class="test-button secondary" onclick="showOptimizationStats()">
                Estad√≠sticas
            </button>
            
            <div id="optimization-results"></div>
        </div>
        
        <!-- Secci√≥n 5: Testing Completo -->
        <div class="test-section">
            <h2>üß™ Testing Completo</h2>
            <p>Ejecuta todas las pruebas del sistema de una vez.</p>
            
            <button class="test-button" onclick="runCompleteTest()">
                Ejecutar Test Completo
            </button>
            <button class="test-button danger" onclick="clearOutput()">
                Limpiar Console
            </button>
            
            <div class="status success">‚úÖ Sistema Cargado</div>
            <div class="status" id="theme-status">üîÑ Verificando Tema...</div>
            <div class="status" id="tooltip-status">üîÑ Verificando Tooltips...</div>
            <div class="status" id="animation-status">üîÑ Verificando Animaciones...</div>
        </div>
        
        <!-- Console de Output -->
        <div class="test-section">
            <h2>üìä Console Output</h2>
            <div id="console-output" class="output">
                Esperando comandos...
                
                Comandos disponibles:
                - testThemeSystem(): Probar sistema de temas
                - runCSSAnalysis(): Analizar CSS usado
                - testAnimations(): Ejecutar animaciones de prueba
                - runCompleteTest(): Test integral del sistema
            </div>
        </div>
    </div>

    <script>
        let output = document.getElementById('console-output');
        
        function log(message) {
            output.textContent += '\n' + new Date().toLocaleTimeString() + ' - ' + message;
            output.scrollTop = output.scrollHeight;
        }
        
        function clearOutput() {
            output.textContent = 'Console limpiado...\n';
        }
        
        // Sistema de Temas
        function testThemeSystem() {
            log('üé® Probando sistema de temas...');
            
            // Intentar diferentes formas de acceder al sistema de temas
            let themeSystem = window.LinoTheme || window.linoThemeManager || LinoTheme;
            
            if (themeSystem) {
                try {
                    if (typeof themeSystem.toggle === 'function') {
                        themeSystem.toggle();
                        const currentTheme = themeSystem.get ? themeSystem.get() : 'alternado';
                        log('‚úÖ Tema alternado a: ' + currentTheme);
                        
                        document.getElementById('theme-status').textContent = '‚úÖ Tema: ' + currentTheme;
                        document.getElementById('theme-status').className = 'status success';
                    } else {
                        log('‚ö†Ô∏è Sistema de temas encontrado pero sin funci√≥n toggle');
                    }
                } catch(e) {
                    log('‚ö†Ô∏è Error al ejecutar toggle: ' + e.message);
                }
            } else {
                log('‚ùå Sistema de temas no est√° disponible');
                document.getElementById('theme-status').textContent = '‚ùå Error en Tema';
                document.getElementById('theme-status').className = 'status error';
            }
        }
        
        function showThemeInfo() {
            if (typeof LinoTheme !== 'undefined') {
                log('üìã Informaci√≥n del tema:');
                log('  - Tema actual: ' + LinoTheme.get());
                log('  - Es oscuro: ' + LinoTheme.isDark());
                log('  - Es claro: ' + LinoTheme.isLight());
            } else {
                log('‚ùå Sistema de temas no disponible');
            }
        }
        
        function resetTheme() {
            if (typeof LinoTheme !== 'undefined') {
                LinoTheme.set('light');
                log('üîÑ Tema reseteado a claro');
            }
        }
        
        // Animaciones
        function testAnimations() {
            log('üé¨ Ejecutando animaciones de prueba...');
            
            if (typeof linoAnimate !== 'undefined') {
                const kpis = document.querySelectorAll('.kpi-card');
                kpis.forEach((kpi, index) => {
                    setTimeout(() => {
                        linoAnimate.scaleIn(kpi, 500);
                        log('‚úÖ Animaci√≥n ejecutada en KPI ' + (index + 1));
                    }, index * 200);
                });
                
                document.getElementById('animation-status').textContent = '‚úÖ Animaciones OK';
                document.getElementById('animation-status').className = 'status success';
            } else {
                log('‚ùå Sistema de animaciones no disponible');
                document.getElementById('animation-status').textContent = '‚ùå Error Animaciones';
                document.getElementById('animation-status').className = 'status error';
            }
        }
        
        function testCounterAnimation() {
            if (typeof linoAnimate !== 'undefined') {
                log('üìä Ejecutando contadores animados...');
                
                linoAnimate.animateCounter(document.getElementById('counter-1'), 0, 156, 2000);
                linoAnimate.animateCounter(document.getElementById('counter-2'), 0, 89, 2500);
                linoAnimate.animateCounter(document.getElementById('counter-3'), 0, 243, 3000);
                
                log('‚úÖ Contadores animados iniciados');
            }
        }
        
        function testProgressAnimation() {
            if (typeof linoAnimate !== 'undefined') {
                log('üìà Ejecutando barra de progreso...');
                
                const progressBar = document.getElementById('progress-bar');
                linoAnimate.animateProgress(progressBar, 75, 2000);
                
                log('‚úÖ Barra de progreso animada al 75%');
            }
        }
        
        // Optimizaci√≥n CSS
        function runCSSAnalysis() {
            log('‚ö° Iniciando an√°lisis de CSS...');
            
            // Intentar diferentes formas de acceder al optimizador
            let optimizer = window.linoOptimize || window.LinoCSSOptimizer || linoOptimize;
            
            if (optimizer) {
                try {
                    const report = optimizer.analyze();
                    log('üìä An√°lisis CSS completado:');
                    log('  - Componentes usados: ' + report.componentsUsed.length);
                    log('  - Selectores detectados: ' + report.selectorsUsed);
                    log('  - Variables CSS: ' + report.variablesUsed);
                    log('  - Potencial optimizaci√≥n: ' + report.optimization.optimizationPotential + '%');
                    
                    const resultsDiv = document.getElementById('optimization-results');
                    resultsDiv.innerHTML = `
                        <div class="status success">‚úÖ An√°lisis Completo</div>
                        <p><strong>Componentes utilizados:</strong> ${report.componentsUsed.join(', ')}</p>
                        <p><strong>Optimizaci√≥n posible:</strong> ${report.optimization.optimizationPotential}%</p>
                        <p><strong>Selectores CSS:</strong> ${report.selectorsUsed}</p>
                    `;
                } catch(e) {
                    log('‚ùå Error en an√°lisis: ' + e.message);
                }
            } else {
                log('‚ùå Sistema de optimizaci√≥n no disponible');
                log('üí° Sugerencia: Ejecutar desde la aplicaci√≥n principal');
            }
        }
        
        function optimizeCSS() {
            log('üöÄ Optimizando CSS...');
            
            if (typeof linoOptimize !== 'undefined') {
                linoOptimize.purge({ minify: true }).then(result => {
                    log('‚úÖ CSS optimizado:');
                    log('  - Tama√±o original: ' + result.stats.originalSize);
                    log('  - Tama√±o optimizado: ' + result.stats.optimizedSize);
                    log('  - Ahorro: ' + result.stats.savings + ' (' + result.stats.percentage + ')');
                });
            } else {
                log('‚ùå Optimizador no disponible');
            }
        }
        
        function showOptimizationStats() {
            log('üìà Estad√≠sticas de optimizaci√≥n actuales...');
            // Simular estad√≠sticas
            log('  - CSS Original: 54.7KB');
            log('  - CSS Usado: ~32.1KB');
            log('  - Ahorro potencial: 41.3%');
            log('  - Componentes activos: 8/15');
        }
        
        // Test completo
        function runCompleteTest() {
            log('üß™ INICIANDO TEST COMPLETO DEL SISTEMA LINO V3');
            log('================================================');
            
            // Test 1: Tema
            setTimeout(() => {
                log('1Ô∏è‚É£ Testing sistema de temas...');
                testThemeSystem();
            }, 500);
            
            // Test 2: Tooltips
            setTimeout(() => {
                log('2Ô∏è‚É£ Verificando tooltips...');
                if (typeof LinoTooltips !== 'undefined') {
                    log('‚úÖ Sistema de tooltips disponible');
                    document.getElementById('tooltip-status').textContent = '‚úÖ Tooltips OK';
                    document.getElementById('tooltip-status').className = 'status success';
                } else {
                    log('‚ùå Tooltips no disponibles');
                    document.getElementById('tooltip-status').textContent = '‚ùå Error Tooltips';
                    document.getElementById('tooltip-status').className = 'status error';
                }
            }, 1000);
            
            // Test 3: Animaciones
            setTimeout(() => {
                log('3Ô∏è‚É£ Testing animaciones...');
                testAnimations();
            }, 1500);
            
            // Test 4: CSS Optimizer
            setTimeout(() => {
                log('4Ô∏è‚É£ Testing optimizador CSS...');
                runCSSAnalysis();
            }, 2000);
            
            // Test 5: Contadores
            setTimeout(() => {
                log('5Ô∏è‚É£ Testing contadores animados...');
                testCounterAnimation();
            }, 2500);
            
            // Reporte final
            setTimeout(() => {
                log('');
                log('üéâ TEST COMPLETO FINALIZADO');
                log('===========================');
                log('‚úÖ LINO Design System V3 est√° funcionando correctamente');
                log('üìä Todas las funcionalidades avanzadas operativas');
                log('üöÄ Sistema listo para producci√≥n');
            }, 3000);
        }
        
        // Inicializaci√≥n
        function checkSystems() {
            log('ÔøΩ Verificando sistemas LINO V3...');
            
            // Sistema de Temas
            if (typeof window.LinoTheme !== 'undefined' || typeof LinoTheme !== 'undefined') {
                log('‚úÖ Sistema de temas detectado');
                document.getElementById('theme-status').textContent = '‚úÖ Tema OK';
                document.getElementById('theme-status').className = 'status success';
            } else {
                log('‚ö†Ô∏è Sistema de temas no detectado');
                document.getElementById('theme-status').textContent = '‚ö†Ô∏è Tema Pendiente';
                document.getElementById('theme-status').className = 'status warning';
            }
            
            // Sistema de Tooltips
            let tooltipSystem = window.LinoTooltips || window.linoTooltip || LinoTooltips;
            if (tooltipSystem) {
                log('‚úÖ Sistema de tooltips detectado');
                document.getElementById('tooltip-status').textContent = '‚úÖ Tooltips OK';
                document.getElementById('tooltip-status').className = 'status success';
                
                // Inicializar tooltips en esta p√°gina
                setTimeout(() => {
                    if (tooltipSystem.scanForTooltips) {
                        tooltipSystem.scanForTooltips();
                        log('üéØ Tooltips inicializados en testing console');
                    }
                }, 1000);
            } else {
                log('‚ö†Ô∏è Sistema de tooltips no detectado');
                document.getElementById('tooltip-status').textContent = '‚ö†Ô∏è Tooltips Pendiente';
                document.getElementById('tooltip-status').className = 'status warning';
            }
            
            // Sistema de Animaciones
            if (typeof window.linoAnimate !== 'undefined' || typeof linoAnimate !== 'undefined') {
                log('‚úÖ Sistema de animaciones detectado');
                document.getElementById('animation-status').textContent = '‚úÖ Animaciones OK';
                document.getElementById('animation-status').className = 'status success';
            } else {
                log('‚ö†Ô∏è Sistema de animaciones no detectado');
                document.getElementById('animation-status').textContent = '‚ö†Ô∏è Animaciones Pendiente';
                document.getElementById('animation-status').className = 'status warning';
            }
            
            // Optimizador CSS
            if (typeof window.linoOptimize !== 'undefined' || typeof linoOptimize !== 'undefined') {
                log('‚úÖ Optimizador CSS detectado');
            } else {
                log('‚ö†Ô∏è Optimizador CSS no detectado');
            }
            
            log('üéØ Verificaci√≥n completada. Los sistemas pueden tardar en cargar...');
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            log('üöÄ LINO V3 Testing Console inicializado');
            log('Cargando sistemas desde servidor...');
            
            // Verificar inmediatamente
            checkSystems();
            
            // Re-verificar despu√©s de un tiempo
            setTimeout(checkSystems, 2000);
            setTimeout(checkSystems, 5000);
        });
    </script>
</body>
</html>
