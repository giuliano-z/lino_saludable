<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Debugger CSS - LINO Ventas</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            color: #7fb069;
            border-bottom: 2px solid #4a5c3a;
            padding-bottom: 0.5rem;
        }
        
        .section {
            background: #252526;
            border: 1px solid #3e3e42;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }
        
        .status-ok {
            color: #7fb069;
            font-weight: bold;
        }
        
        .status-error {
            color: #c85a54;
            font-weight: bold;
        }
        
        .code {
            background: #1e1e1e;
            border: 1px solid #3e3e42;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
            margin: 0.5rem 0;
        }
        
        .btn {
            background: #4a5c3a;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            margin: 0.5rem 0.5rem 0.5rem 0;
        }
        
        .btn:hover {
            background: #3d4a2f;
        }
        
        .result {
            margin-top: 1rem;
            padding: 1rem;
            background: #1e1e1e;
            border-left: 3px solid #7fb069;
        }
        
        .color-box {
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 2px solid white;
            border-radius: 4px;
            vertical-align: middle;
            margin-right: 0.5rem;
        }
    </style>
</head>
<body>
    <h1>üîç LINO CSS Debugger</h1>
    
    <div class="section">
        <h2>üìã Checklist de Diagn√≥stico</h2>
        <div id="checklist">
            <p>‚è≥ Ejecutando tests...</p>
        </div>
    </div>
    
    <div class="section">
        <h2>üé® Paleta de Colores Detectada</h2>
        <div id="colors"></div>
    </div>
    
    <div class="section">
        <h2>üì¶ Archivos CSS Cargados</h2>
        <div id="cssFiles"></div>
    </div>
    
    <div class="section">
        <h2>üõ†Ô∏è Acciones R√°pidas</h2>
        <button class="btn" onclick="clearCache()">üóëÔ∏è Limpiar Cach√© del Navegador</button>
        <button class="btn" onclick="reloadCSS()">üîÑ Recargar CSS Sin Cach√©</button>
        <button class="btn" onclick="checkFormulario()">‚úÖ Verificar Formulario Ventas</button>
        <div id="actionResult" class="result" style="display: none;"></div>
    </div>
    
    <div class="section">
        <h2>üìù Variables CSS Actuales</h2>
        <div id="cssVars" class="code"></div>
    </div>
    
    <script>
        // Funci√≥n para verificar archivos CSS
        function checkCSSFiles() {
            const links = document.styleSheets;
            let html = '<ul>';
            let foundLino = false;
            
            for (let i = 0; i < links.length; i++) {
                const sheet = links[i];
                if (sheet.href) {
                    const href = sheet.href;
                    const isLino = href.includes('lino');
                    
                    if (isLino) foundLino = true;
                    
                    html += `<li class="${isLino ? 'status-ok' : ''}">
                        ${isLino ? '‚úÖ' : 'üìÑ'} ${href.split('/').pop()}
                        <br><small>${href}</small>
                    </li>`;
                }
            }
            html += '</ul>';
            
            if (!foundLino) {
                html += '<p class="status-error">‚ö†Ô∏è NO se detectaron archivos CSS de LINO cargados</p>';
            }
            
            document.getElementById('cssFiles').innerHTML = html;
        }
        
        // Funci√≥n para detectar variables CSS
        function checkCSSVars() {
            const root = document.documentElement;
            const computedStyle = getComputedStyle(root);
            
            const varsToCheck = [
                '--lino-primary',
                '--lino-secondary',
                '--lino-accent',
                '--lino-dark',
                '--lino-light',
                '--lino-success',
                '--lino-warning',
                '--lino-danger'
            ];
            
            let html = '';
            let correctPalette = true;
            
            varsToCheck.forEach(varName => {
                const value = computedStyle.getPropertyValue(varName).trim();
                const isCorrect = (varName === '--lino-primary' && value === '#4a5c3a') ||
                                 (varName === '--lino-accent' && value === '#8b9471');
                
                if (varName === '--lino-primary' && value !== '#4a5c3a') {
                    correctPalette = false;
                }
                
                html += `<div style="margin: 0.5rem 0;">
                    <span class="color-box" style="background: ${value}"></span>
                    <strong>${varName}:</strong> 
                    <code style="color: ${isCorrect ? '#7fb069' : '#c85a54'}">${value || 'NO DEFINIDA'}</code>
                </div>`;
            });
            
            document.getElementById('cssVars').innerHTML = html;
            
            return correctPalette;
        }
        
        // Funci√≥n para verificar paleta de colores
        function checkColors() {
            const correctPalette = checkCSSVars();
            
            const html = correctPalette 
                ? `<p class="status-ok">‚úÖ Paleta verde oliva correcta (#4a5c3a)</p>`
                : `<p class="status-error">‚ùå Paleta incorrecta (deber√≠a ser #4a5c3a)</p>`;
            
            document.getElementById('colors').innerHTML = html;
        }
        
        // Checklist completo
        function runChecklist() {
            const checks = [];
            
            // 1. Verificar archivos CSS
            const hasLinoMain = Array.from(document.styleSheets).some(s => 
                s.href && s.href.includes('lino-main.css')
            );
            checks.push({
                name: 'lino-main.css cargado',
                passed: hasLinoMain
            });
            
            // 2. Verificar paleta
            const root = getComputedStyle(document.documentElement);
            const primary = root.getPropertyValue('--lino-primary').trim();
            checks.push({
                name: 'Paleta verde oliva (#4a5c3a)',
                passed: primary === '#4a5c3a'
            });
            
            // 3. Verificar wizard CSS
            const hasWizardCSS = Array.from(document.styleSheets).some(s => 
                s.href && s.href.includes('lino-wizard-ventas.css')
            );
            checks.push({
                name: 'lino-wizard-ventas.css cargado',
                passed: hasWizardCSS
            });
            
            let html = '<ul>';
            checks.forEach(check => {
                html += `<li class="${check.passed ? 'status-ok' : 'status-error'}">
                    ${check.passed ? '‚úÖ' : '‚ùå'} ${check.name}
                </li>`;
            });
            html += '</ul>';
            
            document.getElementById('checklist').innerHTML = html;
        }
        
        // Acciones
        function clearCache() {
            const result = document.getElementById('actionResult');
            result.style.display = 'block';
            result.innerHTML = `
                <h3>üóëÔ∏è Instrucciones para Limpiar Cach√©</h3>
                <p><strong>Mac:</strong> Presiona <code>Cmd + Shift + R</code></p>
                <p><strong>Windows:</strong> Presiona <code>Ctrl + Shift + R</code></p>
                <p><strong>Manual:</strong></p>
                <ol>
                    <li>Abre las DevTools (F12)</li>
                    <li>Clic derecho en el bot√≥n de recarga</li>
                    <li>Selecciona "Vaciar cach√© y recargar de forma forzada"</li>
                </ol>
            `;
        }
        
        function reloadCSS() {
            const links = document.querySelectorAll('link[rel="stylesheet"]');
            links.forEach(link => {
                const href = link.getAttribute('href');
                if (href.includes('lino')) {
                    link.setAttribute('href', href.split('?')[0] + '?v=' + Date.now());
                }
            });
            
            const result = document.getElementById('actionResult');
            result.style.display = 'block';
            result.innerHTML = `
                <h3>‚úÖ CSS Recargado</h3>
                <p>Se forz√≥ la recarga de todos los archivos CSS de LINO.</p>
                <p>La p√°gina se recargar√° en 2 segundos...</p>
            `;
            
            setTimeout(() => {
                window.location.reload();
            }, 2000);
        }
        
        function checkFormulario() {
            window.open('http://127.0.0.1:8000/gestion/ventas/crear/', '_blank');
            
            const result = document.getElementById('actionResult');
            result.style.display = 'block';
            result.innerHTML = `
                <h3>üîç Verificaciones en el Formulario</h3>
                <p>Se abri√≥ el formulario en una nueva pesta√±a.</p>
                <p><strong>Verifica:</strong></p>
                <ul>
                    <li>¬øC√≠rculos de progreso son peque√±os (32px)?</li>
                    <li>¬øColor verde oliva #4a5c3a (no turquesa)?</li>
                    <li>¬øBot√≥n "Agregar Producto" es compacto?</li>
                    <li>¬øLabels est√°n ARRIBA de los inputs?</li>
                </ul>
            `;
        }
        
        // Ejecutar al cargar
        window.addEventListener('load', () => {
            checkCSSFiles();
            checkColors();
            runChecklist();
        });
    </script>
</body>
</html>
